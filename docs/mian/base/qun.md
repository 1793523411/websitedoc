# 群聊

::: warning 说明
这里收集了一些群聊的面试题！！！
:::

## video标签在移动端不兼容

::: tip Q
问个问题，video标签在移动端不兼容,有没有成熟的解决办法,特别是安卓，各大浏览器或者微信qq内核全部改造了video,视频不是不能自动播放，就是层级过高，要不就是不能控制
:::

微信可以。。,查下api吧,xweb内核 安卓,可以，得用weixinsdk啊

滴滴官网用的视频背景，移动端采用的是16ms替换一张img图片，pc采用video

video.js

## H5白屏

::: tip Q
面试题： H5页面，发布了外网，打开以后都是白屏，你会怎么做，有可能只有他手机是白屏
:::

这个问题老经典了,从整个链路上来找问题,没有标准答案,面试官问这个问题是想看你思考问题的思路,怎么追踪并想办法解决的,一般就从网络和浏览器来考虑

既然是h5的话 肯定还要考虑系统的影响,之前我们项目ios全部白屏 安卓全部正常,我上次说的一个方法是开瀑布图,

先看自己能不能复现啊,不能复现就去拉用户日志,按照日志查关键节点,猜测会出问题的地方,本地打断点模拟问题情况,一般来说基建做的好 白屏这种大问题,还是很好查的,先看资源拿到没有,没有拿到就从浏览器排查到服务器，有时候还得排查到cdn，有时候cdn返回会出问题,拿到就是代码问题了,看环境看代码,慢慢查,我们上次遇到全部正常返回,查了半天查不到原因,最后一抖机灵,发现部分cdn节点返回的文件content是0,他娘的坑死了

一般白屏 都是网络问题导致 静态资源加载失败

我：先检查服务端和f12看看资源请求有没有问题。面试官：是用户反馈在他手机上白屏，你怎么f12呢。我：只有他手机上白屏的话....。 面试官：你怎么确定只有他手机白屏。 我：询问他的机型，去复现一下。 面试官：假如你这边打开都没有问题呢。我：。。。。。

复现不了 只能靠埋点了吧

这种问题还是很看思路的,别人有问题,一般不是你写的代码的问题,一般是别人的环境的问题

还是要看环境,我觉得这个问题贼棘手,网络环境 系统环境 浏览器环境,还有客户端版本,系统版本包含在系统环境了

面试官的意思是 无论怎么样你都复现不了 怎么办把

当时我是面美团的时候，三面的老板问的这个问题,当时面试官说的是，这个问题不是要你回答出标准答案的，是看你思考这个问题的思路的

**面试官问，你怎么在你本地定位到远程的某个用户页面出了问题，查日志怎么查**,我直接懵了啊，我分析了很多，他都说你都没根本性的解决问题,我说了埋点的方式，他说那你这个是一种比较通用的解决方式，所有用户都适用的。但是我要的是只解决那某个用户的问题



## 强缓存问题

::: tip Q
如果test.js的缓存是1天，但半天内，开发上线了新js，这时候浏览器一直访问的是强缓存，那如何让浏览器拉取新的js？
:::

已经强缓存了，就是在强缓存阶段或者它之前就让浏览器刷新

network勾选disable cache


f5带那个cache-control:max-age=0

ctrl+f5是pragma: no-cache 加 cache-control:no-cache

但是很诡异的还记得private是让中间服务器不缓存

+ private： 这种情况就是只有浏览器能缓存了，中间的代理服务器不能缓存。
+ no-cache: 跳过当前的强缓存，发送HTTP请求，即直接进入协商缓存阶段。
+ no-store：非常粗暴，不进行任何形式的缓存。
+ s-maxage：这和max-age长得比较像，但是区别在于s-maxage是针对代理服务器的缓存时间。

我用edge试了一下就是带的no-cache，chrome不知道为什么完全没有缓存