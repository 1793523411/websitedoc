<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>对浏览器的理解 | 跌倒的小黄瓜</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="文档部分">
    
    <link rel="preload" href="/assets/css/0.styles.060cc481.css" as="style"><link rel="preload" href="/assets/js/app.109dec69.js" as="script"><link rel="preload" href="/assets/js/2.fe82f1de.js" as="script"><link rel="preload" href="/assets/js/43.caea195c.js" as="script"><link rel="prefetch" href="/assets/js/10.c12c8ad8.js"><link rel="prefetch" href="/assets/js/11.d9b15f6c.js"><link rel="prefetch" href="/assets/js/12.3b6afc87.js"><link rel="prefetch" href="/assets/js/13.0a735cc9.js"><link rel="prefetch" href="/assets/js/14.f794b3ef.js"><link rel="prefetch" href="/assets/js/15.03b6c3a2.js"><link rel="prefetch" href="/assets/js/16.4c6b6faf.js"><link rel="prefetch" href="/assets/js/17.4c05e969.js"><link rel="prefetch" href="/assets/js/18.3f053382.js"><link rel="prefetch" href="/assets/js/19.68befba2.js"><link rel="prefetch" href="/assets/js/20.76690524.js"><link rel="prefetch" href="/assets/js/21.08b0d3a8.js"><link rel="prefetch" href="/assets/js/22.fb7b8d54.js"><link rel="prefetch" href="/assets/js/23.74088265.js"><link rel="prefetch" href="/assets/js/24.913dc1ad.js"><link rel="prefetch" href="/assets/js/25.ec49ad77.js"><link rel="prefetch" href="/assets/js/26.da7e0ea8.js"><link rel="prefetch" href="/assets/js/27.c852c837.js"><link rel="prefetch" href="/assets/js/28.c003f855.js"><link rel="prefetch" href="/assets/js/29.1567d60d.js"><link rel="prefetch" href="/assets/js/3.02602895.js"><link rel="prefetch" href="/assets/js/30.3e0b7360.js"><link rel="prefetch" href="/assets/js/31.1f63794a.js"><link rel="prefetch" href="/assets/js/32.226d48cc.js"><link rel="prefetch" href="/assets/js/33.86510584.js"><link rel="prefetch" href="/assets/js/34.0b6925f6.js"><link rel="prefetch" href="/assets/js/35.27d5ab49.js"><link rel="prefetch" href="/assets/js/36.7991aaaa.js"><link rel="prefetch" href="/assets/js/37.b1c75aaa.js"><link rel="prefetch" href="/assets/js/38.032686d3.js"><link rel="prefetch" href="/assets/js/39.71046e73.js"><link rel="prefetch" href="/assets/js/4.d8099d01.js"><link rel="prefetch" href="/assets/js/40.ddb0cd3f.js"><link rel="prefetch" href="/assets/js/41.5cde72e3.js"><link rel="prefetch" href="/assets/js/42.149738ae.js"><link rel="prefetch" href="/assets/js/44.f99cc4d4.js"><link rel="prefetch" href="/assets/js/45.8193976f.js"><link rel="prefetch" href="/assets/js/46.1ef7882a.js"><link rel="prefetch" href="/assets/js/47.d9bdb1c0.js"><link rel="prefetch" href="/assets/js/48.d75de7a7.js"><link rel="prefetch" href="/assets/js/49.d6d173c1.js"><link rel="prefetch" href="/assets/js/5.d7ce0a9b.js"><link rel="prefetch" href="/assets/js/50.df8d8af6.js"><link rel="prefetch" href="/assets/js/51.01e2d401.js"><link rel="prefetch" href="/assets/js/52.7ef0f86e.js"><link rel="prefetch" href="/assets/js/53.1def2f2d.js"><link rel="prefetch" href="/assets/js/54.0d6c9caf.js"><link rel="prefetch" href="/assets/js/55.af9373a4.js"><link rel="prefetch" href="/assets/js/56.7bb855bd.js"><link rel="prefetch" href="/assets/js/57.5f870d5e.js"><link rel="prefetch" href="/assets/js/58.0fcaa988.js"><link rel="prefetch" href="/assets/js/59.36b95f83.js"><link rel="prefetch" href="/assets/js/6.cadeca81.js"><link rel="prefetch" href="/assets/js/60.10ffeab5.js"><link rel="prefetch" href="/assets/js/61.6da16abc.js"><link rel="prefetch" href="/assets/js/62.55d1e846.js"><link rel="prefetch" href="/assets/js/63.3eee06df.js"><link rel="prefetch" href="/assets/js/64.676241a6.js"><link rel="prefetch" href="/assets/js/65.1b3f992b.js"><link rel="prefetch" href="/assets/js/66.6c3d6c7b.js"><link rel="prefetch" href="/assets/js/67.5521ada4.js"><link rel="prefetch" href="/assets/js/68.77f20e1c.js"><link rel="prefetch" href="/assets/js/69.9245a671.js"><link rel="prefetch" href="/assets/js/7.6694095a.js"><link rel="prefetch" href="/assets/js/8.80131140.js"><link rel="prefetch" href="/assets/js/9.39451dc6.js">
    <link rel="stylesheet" href="/assets/css/0.styles.060cc481.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">跌倒的小黄瓜</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/mian/" class="nav-link router-link-active">
  面试
</a></div><div class="nav-item"><a href="/Demo/" class="nav-link">
  Demo
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/1793523411" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://mymaster.ygjie.icu" target="_blank" rel="noopener noreferrer" class="nav-link external">
  master
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/mian/" class="nav-link router-link-active">
  面试
</a></div><div class="nav-item"><a href="/Demo/" class="nav-link">
  Demo
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/1793523411" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://mymaster.ygjie.icu" target="_blank" rel="noopener noreferrer" class="nav-link external">
  master
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>前端</span> <!----></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>面试知识点</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/mian/base/browser.html" aria-current="page" class="active sidebar-link">浏览器</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/mian/base/browser.html#对浏览器的理解" class="sidebar-link">对浏览器的理解</a></li><li class="sidebar-sub-header"><a href="/mian/base/browser.html#对浏览器内核的理解" class="sidebar-link">对浏览器内核的理解</a></li><li class="sidebar-sub-header"><a href="/mian/base/browser.html#常见的浏览器内核比较" class="sidebar-link">常见的浏览器内核比较</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/mian/base/browser.html#常见浏览器所用内核" class="sidebar-link">常见浏览器所用内核</a></li></ul></li><li class="sidebar-sub-header"><a href="/mian/base/browser.html#浏览器的渲染原理" class="sidebar-link">浏览器的渲染原理</a></li><li class="sidebar-sub-header"><a href="/mian/base/browser.html#浏览器解析过程" class="sidebar-link">浏览器解析过程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/mian/base/browser.html#渲染过程中遇到-js-文件怎么处理" class="sidebar-link">渲染过程中遇到 JS 文件怎么处理？</a></li><li class="sidebar-sub-header"><a href="/mian/base/browser.html#async-和-和-defer-的作用是什么-有什么区别" class="sidebar-link">async 和 和 defer 的作用是什么？有什么区别？</a></li><li class="sidebar-sub-header"><a href="/mian/base/browser.html#什么是文档的预解析" class="sidebar-link">什么是文档的预解析</a></li><li class="sidebar-sub-header"><a href="/mian/base/browser.html#css-如何阻塞文档解析" class="sidebar-link">CSS 如何阻塞文档解析</a></li></ul></li><li class="sidebar-sub-header"><a href="/mian/base/browser.html#浏览器渲染过程" class="sidebar-link">浏览器渲染过程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/mian/base/browser.html#渲染页面时常见哪些不良现象" class="sidebar-link">渲染页面时常见哪些不良现象</a></li><li class="sidebar-sub-header"><a href="/mian/base/browser.html#如何优化关键渲染路径" class="sidebar-link">如何优化关键渲染路径</a></li></ul></li><li class="sidebar-sub-header"><a href="/mian/base/browser.html#浏览器绘制过程" class="sidebar-link">浏览器绘制过程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/mian/base/browser.html#什么是重绘和回流" class="sidebar-link">什么是重绘和回流</a></li><li class="sidebar-sub-header"><a href="/mian/base/browser.html#如何减少回流" class="sidebar-link">如何减少回流</a></li><li class="sidebar-sub-header"><a href="/mian/base/browser.html#为什么操作-dom-慢" class="sidebar-link">为什么操作 DOM 慢</a></li></ul></li></ul></li><li><a href="/mian/base/html2.html" class="sidebar-link">HTML</a></li><li><a href="/mian/base/css.html" class="sidebar-link">CSS</a></li><li><a href="/mian/base/js.html" class="sidebar-link">Javascript</a></li><li><a href="/mian/base/vue.html" class="sidebar-link">vue</a></li><li><a href="/mian/base/project.html" class="sidebar-link">工程化</a></li><li><a href="/mian/base/network.html" class="sidebar-link">计算机网络</a></li><li><a href="/mian/base/design.html" class="sidebar-link">设计模式</a></li><li><a href="/mian/base/safe.html" class="sidebar-link">安全</a></li><li><a href="/mian/base/better.html" class="sidebar-link">性能优化</a></li><li><a href="/mian/base/tools.html" class="sidebar-link">工具</a></li><li><a href="/mian/base/datastruct.html" class="sidebar-link">数据结构</a></li><li><a href="/mian/base/jstimu.html" class="sidebar-link">js相关题目</a></li><li><a href="/mian/base/suanfa.html" class="sidebar-link">算法</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>其他</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="对浏览器的理解"><a href="#对浏览器的理解" class="header-anchor">#</a> 对浏览器的理解</h2> <p>浏览器的<strong>主要功能</strong>是将用户选择的 web 资源呈现出来，它需要从服务器请求资源，并将其显示在浏览器窗口中，资源的格式通常是 HTML，也包括 PDF、image 及其他格式。用户用 URI（Uniform Resource Identifier 统一资源标识符）来指定所请求资源的位置。HTML 和 CSS 规范中规定了浏览器解释 html 文档的方式，由 W3C 组织对这些规范进行维护，W3C 是负责制定 web 标准的组织。但是浏览器厂商纷纷开发自己的扩展，对规范的遵循并不完善，这为 web 开发者带来了严重的兼容性问题。<strong>简单来说浏览器可以分为两部分，shell 和 内核</strong>。其中 shell 的种类相对比较多，内核则比较少。shell 是指浏览器的外壳：例如菜单，工具栏等。主要是提供给用户界面操作，参数设置等等。它是调用内核来实现各种功能的。内核才是浏览器的核心内核是基于标记语言显示内容的程序或模块。也有一些浏览器并不区分外壳和内核。从 Mozilla 将 Gecko 独立出来后，才有了外壳和内核的明确划分。</p> <h2 id="对浏览器内核的理解"><a href="#对浏览器内核的理解" class="header-anchor">#</a> 对浏览器内核的理解</h2> <p>主要分成两部分：<strong>渲染引擎和 JS 引擎</strong>。</p> <p>渲染引擎的职责就是渲染，即在浏览器窗口中显示所请求的内容。默认情况下，渲染引擎可以显示 html、xml 文档及图片，它也可以借助插件（一种浏览器扩展）显示其他类型数据，例如使用 PDF 阅读器插件，可以显示 PDF 格式。</p> <p>JS 引擎：解析和执行 javascript 来实现网页的动态效果。最开始渲染引擎和 JS 引擎并没有区分的很明确，<strong>后来 JS 引擎越来越独立，内核就倾向于只指渲染引擎。</strong></p> <h2 id="常见的浏览器内核比较"><a href="#常见的浏览器内核比较" class="header-anchor">#</a> 常见的浏览器内核比较</h2> <p><strong>Trident：这种浏览器内核是 IE 浏览器用的内核</strong>，因为在早期 IE 占有大量的市场份额，所以这种内核比较流行，以前有很多网页也是根据这个内核的标准来编写的，但是实际上这个内核对真正的网页标准支持不是很好。但是由于 IE 的高市场占有率，微软也很长时间没有更新 Trident 内核，就导致了 Trident 内核和 W3C 标准脱节。还有就是 Trident 内核的大量 Bug 等安全问题没有得到解决，加上一些专家学者公开自己认为 IE 浏览器不安全的观点，使很多用户开始转向其他浏览器。</p> <p><strong>Gecko：这是 Firefox 和 Flock 所采用的内核</strong>，这个内核的优点就是<strong>功能强大、丰富，可以支持很多复杂网页效果和浏览器扩展接口</strong>，但是代价是也显而易见就是要<strong>消耗很多的资源，比如内存</strong></p> <p><strong>Presto：Opera 曾经采用的就是 Presto 内核</strong>，Presto 内核被称为公认的浏览网页<strong>速度最快的内核</strong>，这得益于它在开发时的天生优势，在处理 JS 脚本等脚本语言时，会<strong>比其他的内核快 3 倍左右</strong>，缺点就是为了达到很快的速度而<strong>丢掉了一部分网页兼容性</strong></p> <p><strong>Webkit：Webkit 是 Safari 采用的内核</strong>，它的优点就是<strong>网页浏览速度较快</strong>，虽然<strong>不及 Presto 但是也胜于 Gecko 和 Trident</strong>，缺点是对于网页代码的容错性不高，也就是说<strong>对网页代码的兼容性较低</strong>，会使一些编写不标准的网页无法正确显示。WebKit 前身是 KDE 小组的 KHTML 引擎，可以说 WebKit 是 <strong>KHTML</strong> 的一个开源的分支</p> <p><strong>Blink</strong>：谷歌在 Chromium Blog 上发表博客，称<strong>将与苹果的开源浏览器核心 Webkit 分道扬镳，在 Chromium 项目中研发 Blink 渲染引擎</strong>（即浏览器核心），内置于 Chrome 浏览器之中。其实 <strong>Blink 引擎就是 Webkit 的一个分支，就像 webkit 是 KHTML 的分支一样</strong>。Blink 引擎现在是谷歌公司与 Opera Software 共同研发，上面提到过的，<strong>Opera 弃用了自己的 Presto 内核，加入 Google 阵营，跟随谷歌一起研发 Blink</strong></p> <h3 id="常见浏览器所用内核"><a href="#常见浏览器所用内核" class="header-anchor">#</a> 常见浏览器所用内核</h3> <p>（1） IE 浏览器内核：Trident 内核，也是俗称的 IE 内核；</p> <p>（2） Chrome 浏览器内核：统称为 Chromium 内核或 Chrome 内核，以前是 Webkit 内核，现在是 Blink 内核；</p> <p>（3） Firefox 浏览器内核：Gecko 内核，俗称 Firefox 内核；</p> <p>（4） Safari 浏览器内核：Webkit 内核；</p> <p>（5） Opera 浏览器内核：最初是自己的 Presto 内核，后来加入谷歌大军，从 Webkit 又到了 Blink 内核；</p> <p>（6） 360 浏览器、猎豹浏览器内核：IE + Chrome 双内核；</p> <p>（7） 搜狗、遨游、QQ 浏览器内核：Trident（兼容模式）+ Webkit（高速模式）；</p> <p>（8） 百度浏览器、世界之窗内核：IE 内核；</p> <p>（9） 2345 浏览器内核：好像以前是 IE 内核，现在也是 IE + Chrome 双内核了；</p> <p>（10）UC 浏览器内核：这个众口不一，UC 说是他们自己研发的 U3 内核，但好像还是基于 Webkit 和 Trident ，还有说是基于火狐内核</p> <h2 id="浏览器的渲染原理"><a href="#浏览器的渲染原理" class="header-anchor">#</a> 浏览器的渲染原理</h2> <p>（1）首先解析收到的文档，根据文档定义构建一棵 DOM 树，<strong>DOM 树</strong>是由** DOM 元素及属性节点组成的**。</p> <p>（2）然后对 CSS 进行解析，生成** CSSOM 规则树**。</p> <p>（3）<strong>根据 DOM 树和 CSSOM 规则树构建渲染树</strong>。渲染树的节点被称为<strong>渲染对象</strong>，渲染对象是一个包含有颜色和大小等属性的矩形，渲染对象和 DOM 元素相对应，但这种对应关系不是一对一的，不可见的 DOM 元素不会被插入渲染树。还有一些 DOM 元素对应几个可见对象，它们一般是一些具有复杂结构的元素，无法用一个矩形来描述。</p> <p>（4）当渲染对象被创建并添加到树中，它们并没有位置和大小，所以<strong>当浏览器生成渲染树以后，就会根据渲染树来进行布局（也可以叫做回流）</strong>。这一阶段浏览器要做的事情是要<strong>弄清楚各个节点在页面中的确切位置和大小</strong>。通常这一行为也被称为“自动重排”。</p> <p>（5）<strong>布局阶段结束后是绘制阶段</strong>，遍历渲染树并调用渲染对象的 paint 方法将它们的内容显示在屏幕上，绘制使用 UI 基础组件。值得注意的是，这个过程是<strong>逐步完成的</strong>，为了更好的用户体验，渲染引擎将会尽可能早的将内容呈现到屏幕上，并不会等到所有的 html 都解析完成之后再去构建和布局 render 树。它是解析完一部分内容就显示一部分内容，同时，可能还在通过网络下载其余内容</p> <h2 id="浏览器解析过程"><a href="#浏览器解析过程" class="header-anchor">#</a> 浏览器解析过程</h2> <h3 id="渲染过程中遇到-js-文件怎么处理"><a href="#渲染过程中遇到-js-文件怎么处理" class="header-anchor">#</a> 渲染过程中遇到 JS 文件怎么处理？</h3> <p>JavaScript 的加载、解析与执行会阻塞文档的解析，也就是说，在构建 DOM 时，<strong>HTML 解析器若遇到了 JavaScript，那么它会暂停文档的解析，将控制权移交给 JavaScript 引擎</strong>，等 JavaScript 引擎运行完毕，浏览器再从中断的地方恢复继续解析文档。也就是说，如果你想首屏渲染的越快，就越不应该在首屏就加载 JS 文件，这也是都建议<strong>将 script 标签放在 body 标签底部的原因</strong>。当然在当下，并不是说 script 标签必须放在底部，因为你可以给 script 标签添加 <strong>defer</strong> 或者 <strong>async</strong> 属性</p> <h3 id="async-和-和-defer-的作用是什么-有什么区别"><a href="#async-和-和-defer-的作用是什么-有什么区别" class="header-anchor">#</a> async 和 和 defer 的作用是什么？有什么区别？</h3> <p>（1）脚本没有 defer 或 async，浏览器会<strong>立即加载并执行指定的脚本</strong>，也就是说不等待后续载入的文档元素，读到就加载并执行。</p> <p>（2）defer 属性表示延迟执行引入的 JavaScript，即这段 JavaScript 加载时 HTML 并未停止解析，这两个过程是<strong>并行</strong>的。当整个 document 解析完毕后再执行脚本文件，在 DOMContentLoaded 事件触发之前完成。<strong>多个脚本按顺序执行</strong>。</p> <p>（3）async 属性表示异步执行引入的 JavaScript，与 defer 的区别在于，如果已经加载好，就会开始执行，也就是说它的执行仍然会阻塞文档的解析，只是它的加载过程不会阻塞。<strong>多个脚本的执行顺序无法保证</strong>。</p> <h3 id="什么是文档的预解析"><a href="#什么是文档的预解析" class="header-anchor">#</a> 什么是文档的预解析</h3> <p>Webkit 和 Firefox 都做了这个优化，<strong>当执行 JavaScript 脚本时，另一个线程解析剩下的文档</strong>，并加载后面需要通过网络加载的资源。这种方式可以<strong>使资源并行加载从而使整体速度更快</strong>。需要注意的是，<strong>预解析并不改变 DOM 树，它将这个工作留给主解析过程，自己只解析外部资源的引用，比如外部脚本、样式表及图片</strong></p> <h3 id="css-如何阻塞文档解析"><a href="#css-如何阻塞文档解析" class="header-anchor">#</a> CSS 如何阻塞文档解析</h3> <p>理论上，既然<strong>样式表不改变 DOM 树</strong>，也就没有必要停下文档的解析等待它们，然而，存在一个问题，<strong>JavaScript 脚本执行时可能在文档的解析过程中请求样式信息，如果样式还没有加载和解析，脚本将得到错误的值</strong>，显然这将会导致很多问题。所以如果浏览器尚未完成 CSSOM 的下载和构建，而我们却想在此时运行脚本，那么<strong>浏览器将延迟 JavaScript 脚本执行和文档的解析</strong>，直至其完成 CSSOM 的下载和构建。也就是说，在这种情况下，<strong>浏览器会先下载和构建 CSSOM，然后再执行 JavaScript，最后再继续文档的解析</strong>。</p> <h2 id="浏览器渲染过程"><a href="#浏览器渲染过程" class="header-anchor">#</a> 浏览器渲染过程</h2> <h3 id="渲染页面时常见哪些不良现象"><a href="#渲染页面时常见哪些不良现象" class="header-anchor">#</a> 渲染页面时常见哪些不良现象</h3> <p>FOUC：主要指的是<strong>样式闪烁</strong>的问题，由于浏览器渲染机制（比如 firefox），在 CSS 加载之前，先呈现了 HTML，就会导致展示出无样式内容，然后样式突然呈现的现象。会出现这个问题的原因主要是 css 加载时间过长，或者 css 被放在了文档底部。<strong>白屏</strong>：有些浏览器渲染机制（比如 chrome）要<strong>先构建 DOM 树和 CSSOM 树</strong>，构建完成后再进行渲染，如果 CSS 部分放在 HTML 尾部，由于 CSS 未加载完成，浏览器迟迟未渲染，从而导致白屏；也可能是把 <strong>js 文件放在头部</strong>，脚本的加载会阻塞后面文档内容的解析，从而页面迟迟未渲染出来，出现白屏问题</p> <h3 id="如何优化关键渲染路径"><a href="#如何优化关键渲染路径" class="header-anchor">#</a> 如何优化关键渲染路径</h3> <p>为尽快完成<strong>首次渲染</strong>，我们需要最大限度减小以下三种可变因素：</p> <p>（1）关键<strong>资源的数量</strong>。
（2）关键路径<strong>长度</strong>。
（3）关键<strong>字节的数量</strong>。</p> <p><strong>关键资源</strong>是可能阻止网页首次渲染的资源。这些资源越少，浏览器的工作量就越小，对 CPU 以及其他资源的占用也就越少,同样，关<strong>键路径长度</strong>受所有关键资源与其<strong>字节大小</strong>之间依赖关系图的影响：某些资源只能在上一资源处理完毕之后才能开始下载，并且资源越大，下载所需的往返次数就越多。最后，浏览器需要下载的关键字节越少，处理内容并让其出现在屏幕上的速度就越快。要减少字节数，我们可以减少资源数（将它们删除或设为非关键资源），此外还要<strong>压缩和优化各项资源，确保最大限度减小传送大小</strong></p> <p>优化关键渲染路径的<strong>常规步骤</strong>如下：</p> <p>（1）对关键路径<strong>进行分析和特性描述</strong>：资源数、字节数、长度。</p> <p>（2）最大限度减少关键资源的<strong>数量</strong>：删除它们，延迟它们的下载，将它们标记为异步等。</p> <p>（3）优化关键字节数以缩短下载时间（<strong>往返次数</strong>）。</p> <p>（4）优化其余关键资源的<strong>加载顺序</strong>：您需要尽早下载所有关键资产，以缩短关键路径长度。</p> <h2 id="浏览器绘制过程"><a href="#浏览器绘制过程" class="header-anchor">#</a> 浏览器绘制过程</h2> <h3 id="什么是重绘和回流"><a href="#什么是重绘和回流" class="header-anchor">#</a> 什么是重绘和回流</h3> <p>重绘: 当渲染树中的一些元素需要更新属性，而这些属性只是影响元素的外观、风格，而不会影响布局的操作，比如 background color，我们将这样的操作称为重绘。</p> <p>回流：当渲染树中的一部分（或全部）因为元素的规模尺寸、布局、隐藏等改变而需要重新构建的操作，会影响到布局的操作，这样的操作我们称为回流。常见引起回流属性和方法：</p> <p><strong>任何会改变元素几何信息（元素的位置和尺寸大小）的操作，都会触发回流。</strong></p> <p>（1）添加或者删除可见的 DOM 元素；</p> <p>（2）元素尺寸改变——边距、填充、边框、宽度和高度</p> <p>（3）内容变化，比如用户在 input 框中输入文字</p> <p>（4）浏览器窗口尺寸改变——resize 事件发生时</p> <p>（5）计算 offsetWidth 和 offsetHeight 属性</p> <p>（6）设置 style 属性的值</p> <p>（7）当你修改网页的默认字体时。</p> <p><strong>回流必定会发生重绘，重绘不一定会引发回流</strong>。回流所需的成本比重绘高的多，改变父节点里的子节点很可能会导致父节点的一系列回流</p> <h3 id="如何减少回流"><a href="#如何减少回流" class="header-anchor">#</a> 如何减少回流</h3> <p>（1）使用 transform 替代 top</p> <p>（2）不要把节点的属性值放在一个循环里当成循环里的变量</p> <p>（3）不要使用 table 布局，可能很小的一个小改动会造成整个 table 的重新布局</p> <p>（4）把 DOM 离线后修改。如：使用 documentFragment 对象在内存里操作 DOM</p> <p>（5）不要一条一条地修改 DOM 的样式。与其这样，还不如预先定义好 css 的 class，然后修改 DOM 的 className。</p> <h3 id="为什么操作-dom-慢"><a href="#为什么操作-dom-慢" class="header-anchor">#</a> 为什么操作 DOM 慢</h3> <p>一些 DOM 的操作或者属性访问可能会引起页面的回流和重绘，从而引起性能上的消耗。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/mian/base/html2.html">
        HTML
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.109dec69.js" defer></script><script src="/assets/js/2.fe82f1de.js" defer></script><script src="/assets/js/43.caea195c.js" defer></script>
  </body>
</html>
