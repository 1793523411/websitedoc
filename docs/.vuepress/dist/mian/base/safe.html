<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <title>知道有哪些可能引起前端安全的问题 | 跌倒的小黄瓜</title>
    <meta name="description" content="">
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="这儿将描述一些东西···💤">
    <link rel="preload" href="/assets/css/0.styles.5251e6d5.css" as="style"><link rel="preload" href="/assets/js/app.7804a0b3.js" as="script"><link rel="preload" href="/assets/js/2.9d52316c.js" as="script"><link rel="preload" href="/assets/js/14.767e6492.js" as="script"><link rel="prefetch" href="/assets/js/10.997f1175.js"><link rel="prefetch" href="/assets/js/11.c8e68b1c.js"><link rel="prefetch" href="/assets/js/12.7b4d399d.js"><link rel="prefetch" href="/assets/js/13.fe02c68a.js"><link rel="prefetch" href="/assets/js/15.fae12494.js"><link rel="prefetch" href="/assets/js/16.7fcfd0c5.js"><link rel="prefetch" href="/assets/js/17.6080a715.js"><link rel="prefetch" href="/assets/js/18.f194af9d.js"><link rel="prefetch" href="/assets/js/19.a9d004ea.js"><link rel="prefetch" href="/assets/js/20.c20bb810.js"><link rel="prefetch" href="/assets/js/21.90aac146.js"><link rel="prefetch" href="/assets/js/22.78eb74f2.js"><link rel="prefetch" href="/assets/js/23.319e4982.js"><link rel="prefetch" href="/assets/js/24.8366aa54.js"><link rel="prefetch" href="/assets/js/25.f8fa3f9e.js"><link rel="prefetch" href="/assets/js/26.62704a12.js"><link rel="prefetch" href="/assets/js/27.640bcf33.js"><link rel="prefetch" href="/assets/js/28.ae767434.js"><link rel="prefetch" href="/assets/js/29.2f3451e7.js"><link rel="prefetch" href="/assets/js/3.fc2fbd9e.js"><link rel="prefetch" href="/assets/js/30.ad641bdb.js"><link rel="prefetch" href="/assets/js/31.7671813f.js"><link rel="prefetch" href="/assets/js/32.ef2b3a32.js"><link rel="prefetch" href="/assets/js/33.226789d6.js"><link rel="prefetch" href="/assets/js/34.15f5ca0b.js"><link rel="prefetch" href="/assets/js/35.e795b3ef.js"><link rel="prefetch" href="/assets/js/36.9de972a8.js"><link rel="prefetch" href="/assets/js/37.f42aab44.js"><link rel="prefetch" href="/assets/js/38.1fedf3ed.js"><link rel="prefetch" href="/assets/js/39.03228b8f.js"><link rel="prefetch" href="/assets/js/4.3e307fce.js"><link rel="prefetch" href="/assets/js/40.81b5ffd1.js"><link rel="prefetch" href="/assets/js/41.eb6343cd.js"><link rel="prefetch" href="/assets/js/42.86ec51c9.js"><link rel="prefetch" href="/assets/js/43.4c71ad1b.js"><link rel="prefetch" href="/assets/js/44.0460b3b2.js"><link rel="prefetch" href="/assets/js/45.07b74c38.js"><link rel="prefetch" href="/assets/js/46.134f073f.js"><link rel="prefetch" href="/assets/js/47.09bea62e.js"><link rel="prefetch" href="/assets/js/48.5fe9acb2.js"><link rel="prefetch" href="/assets/js/49.aed2b82a.js"><link rel="prefetch" href="/assets/js/5.49437d77.js"><link rel="prefetch" href="/assets/js/50.70ce68e0.js"><link rel="prefetch" href="/assets/js/51.f5e4d71c.js"><link rel="prefetch" href="/assets/js/52.c02667bb.js"><link rel="prefetch" href="/assets/js/53.f774f30d.js"><link rel="prefetch" href="/assets/js/54.644fe06f.js"><link rel="prefetch" href="/assets/js/55.6e988143.js"><link rel="prefetch" href="/assets/js/56.48d51fba.js"><link rel="prefetch" href="/assets/js/57.8b082e15.js"><link rel="prefetch" href="/assets/js/58.5c1bc14c.js"><link rel="prefetch" href="/assets/js/59.e20dceb5.js"><link rel="prefetch" href="/assets/js/6.cec4b6ee.js"><link rel="prefetch" href="/assets/js/60.8ce5575c.js"><link rel="prefetch" href="/assets/js/61.d57ab97e.js"><link rel="prefetch" href="/assets/js/62.c3681bea.js"><link rel="prefetch" href="/assets/js/63.90bd940a.js"><link rel="prefetch" href="/assets/js/64.856935ee.js"><link rel="prefetch" href="/assets/js/65.680c7447.js"><link rel="prefetch" href="/assets/js/66.10b8f5c4.js"><link rel="prefetch" href="/assets/js/67.a40eb39d.js"><link rel="prefetch" href="/assets/js/68.9a1dcbf3.js"><link rel="prefetch" href="/assets/js/69.f9c50b2c.js"><link rel="prefetch" href="/assets/js/7.6f34402a.js"><link rel="prefetch" href="/assets/js/70.7b33780d.js"><link rel="prefetch" href="/assets/js/71.509992d3.js"><link rel="prefetch" href="/assets/js/72.d7b48ab2.js"><link rel="prefetch" href="/assets/js/73.6cef776c.js"><link rel="prefetch" href="/assets/js/74.350463b4.js"><link rel="prefetch" href="/assets/js/8.0224a9d3.js"><link rel="prefetch" href="/assets/js/9.9e952900.js">
    <link rel="stylesheet" href="/assets/css/0.styles.5251e6d5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="ant-row"><div class="sidebar-button"><i aria-label="icon: bars" class="anticon anticon-bars"><svg viewBox="0 0 1024 1024" focusable="false" data-icon="bars" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 1 0 112 0 56 56 0 1 0-112 0zm0 284a56 56 0 1 0 112 0 56 56 0 1 0-112 0zm0 284a56 56 0 1 0 112 0 56 56 0 1 0-112 0z"></path></svg></i> <span></span></div> <div class="ant-col ant-col-xs-24 ant-col-sm-24 ant-col-md-6 ant-col-lg-5 ant-col-xl-5 ant-col-xxl-4"><a href="/" class="router-link-active no-logo home-link"><!----> <span class="site-name">跌倒的小黄瓜</span></a> <div class="search-box mobile-search"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div> <div class="ant-col ant-col-xs-0 ant-col-sm-0 ant-col-md-18 ant-col-lg-19 ant-col-xl-19 ant-col-xxl-20"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><ul role="menu" id="nav" class="ant-menu ant-menu-horizontal ant-menu-root ant-menu-light"><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item"><a href="/" class="router-link-active">
          首页
        </a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item"><a href="/mian/index.html">
          面试
        </a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item"><a href="/Demo/index.html">
          Demo
        </a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>
          其他
        </span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="visibility:hidden;position:absolute;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li></ul> <!----></nav></div></div> <!----></header> <aside class="sidebar"><div><div class="ads"><div id="ads_2"><div class="ant-carousel"><div class="slick-slider slick-initialized"><div class="slick-list"><div class="slick-track"><div tabIndex="-1" data-index="-1" aria-hidden="true" class="slick-slide slick-cloned" style="width:null;"><div><div tabIndex="-1" style="width:100%;display:inline-block;"><a href="http://doc1.ygjie.icu/" target="_blank" rel="noopener noreferrer"><img src="https://wx-xly-1301545895.cos.ap-beijing.myqcloud.com/wx-image/doc/timg8.gif" title="Ads details here"></a></div></div></div><div tabIndex="-1" data-index="0" class="slick-slide slick-active slick-current" style="outline:none;width:null;"><div><div tabIndex="-1" style="width:100%;display:inline-block;"><a href="http://doc1.ygjie.icu/" target="_blank" rel="noopener noreferrer"><img src="https://wx-xly-1301545895.cos.ap-beijing.myqcloud.com/wx-image/doc/4173c34f96e93981fd435e36b01b96f9.jpeg" title="Ads details here"></a></div></div></div><div tabIndex="-1" data-index="1" aria-hidden="true" class="slick-slide" style="outline:none;width:null;"><div><div tabIndex="-1" style="width:100%;display:inline-block;"><a href="http://doc1.ygjie.icu/" target="_blank" rel="noopener noreferrer"><img src="https://wx-xly-1301545895.cos.ap-beijing.myqcloud.com/wx-image/doc/5b98420cfdce4a50987d5b137da4fa08.jpg" title="Ads details here"></a></div></div></div><div tabIndex="-1" data-index="2" aria-hidden="true" class="slick-slide" style="outline:none;width:null;"><div><div tabIndex="-1" style="width:100%;display:inline-block;"><a href="http://doc1.ygjie.icu/" target="_blank" rel="noopener noreferrer"><img src="https://wx-xly-1301545895.cos.ap-beijing.myqcloud.com/wx-image/doc/5699abf03eb19.jpg" title="Ads details here"></a></div></div></div><div tabIndex="-1" data-index="3" aria-hidden="true" class="slick-slide" style="outline:none;width:null;"><div><div tabIndex="-1" style="width:100%;display:inline-block;"><a href="http://doc1.ygjie.icu/" target="_blank" rel="noopener noreferrer"><img src="https://wx-xly-1301545895.cos.ap-beijing.myqcloud.com/wx-image/doc/timg8.gif" title="Ads details here"></a></div></div></div><div tabIndex="-1" data-index="4" aria-hidden="true" class="slick-slide slick-cloned" style="width:null;"><div><div tabIndex="-1" style="width:100%;display:inline-block;"><a href="http://doc1.ygjie.icu/" target="_blank" rel="noopener noreferrer"><img src="https://wx-xly-1301545895.cos.ap-beijing.myqcloud.com/wx-image/doc/4173c34f96e93981fd435e36b01b96f9.jpeg" title="Ads details here"></a></div></div></div><div tabIndex="-1" data-index="5" aria-hidden="true" class="slick-slide slick-cloned" style="width:null;"><div><div tabIndex="-1" style="width:100%;display:inline-block;"><a href="http://doc1.ygjie.icu/" target="_blank" rel="noopener noreferrer"><img src="https://wx-xly-1301545895.cos.ap-beijing.myqcloud.com/wx-image/doc/5b98420cfdce4a50987d5b137da4fa08.jpg" title="Ads details here"></a></div></div></div><div tabIndex="-1" data-index="6" aria-hidden="true" class="slick-slide slick-cloned" style="width:null;"><div><div tabIndex="-1" style="width:100%;display:inline-block;"><a href="http://doc1.ygjie.icu/" target="_blank" rel="noopener noreferrer"><img src="https://wx-xly-1301545895.cos.ap-beijing.myqcloud.com/wx-image/doc/5699abf03eb19.jpg" title="Ads details here"></a></div></div></div><div tabIndex="-1" data-index="7" aria-hidden="true" class="slick-slide slick-cloned" style="width:null;"><div><div tabIndex="-1" style="width:100%;display:inline-block;"><a href="http://doc1.ygjie.icu/" target="_blank" rel="noopener noreferrer"><img src="https://wx-xly-1301545895.cos.ap-beijing.myqcloud.com/wx-image/doc/timg8.gif" title="Ads details here"></a></div></div></div></div></div><ul class="slick-dots slick-dots-bottom" style="display:block;"><li class="slick-active"><button>1</button></li><li><button>2</button></li><li><button>3</button></li><li><button>4</button></li></ul></div></div></div></div> <div role="separator" id="reset-margin" class="ant-divider ant-divider-horizontal ant-divider-dashed"></div></div> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>前端</span> <!----></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>面试知识点</span> <span class="arrow down"><i aria-label="icon: down" class="anticon anticon-down"><svg viewBox="64 64 896 896" focusable="false" data-icon="down" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"></path></svg></i></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/mian/base/browser.html" title="浏览器" class="sidebar-link">浏览器</a></li><li><a href="/mian/base/html2.html" title="HTML" class="sidebar-link">HTML</a></li><li><a href="/mian/base/css.html" title="CSS" class="sidebar-link">CSS</a></li><li><a href="/mian/base/js.html" title="Javascript" class="sidebar-link">Javascript</a></li><li><a href="/mian/base/Ajax.html" title="Ajax" class="sidebar-link">Ajax</a></li><li><a href="/mian/base/es6.html" title="ES6" class="sidebar-link">ES6</a></li><li><a href="/mian/base/nodejs.html" title="nodejs" class="sidebar-link">nodejs</a></li><li><a href="/mian/base/ts.html" title="TypeScript" class="sidebar-link">TypeScript</a></li><li><a href="/mian/base/vue.html" title="vue" class="sidebar-link">vue</a></li><li><a href="/mian/base/react.html" title="react" class="sidebar-link">react</a></li><li><a href="/mian/base/wx.html" title="微信小程序" class="sidebar-link">微信小程序</a></li><li><a href="/mian/base/project.html" title="工程化" class="sidebar-link">工程化</a></li><li><a href="/mian/base/network.html" title="计算机网络" class="sidebar-link">计算机网络</a></li><li><a href="/mian/base/design.html" title="设计模式" class="sidebar-link">设计模式</a></li><li><a href="/mian/base/safe.html" aria-current="page" title="安全" class="active sidebar-link">安全</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/mian/base/safe.html#知道有哪些可能引起前端安全的问题" title="知道有哪些可能引起前端安全的问题" class="sidebar-link">知道有哪些可能引起前端安全的问题</a></li><li class="sidebar-sub-header"><a href="/mian/base/safe.html#什么是-xss-范-攻击-如何防范-xss-攻击" title="什么是 XSS 范 攻击？如何防范 XSS 攻击" class="sidebar-link">什么是 XSS 范 攻击？如何防范 XSS 攻击</a></li><li class="sidebar-sub-header"><a href="/mian/base/safe.html#预防xss" title="预防XSS" class="sidebar-link">预防XSS</a></li><li class="sidebar-sub-header"><a href="/mian/base/safe.html#什么是-csp" title="什么是 CSP" class="sidebar-link">什么是 CSP</a></li><li class="sidebar-sub-header"><a href="/mian/base/safe.html#什么是-csrf-范-攻击-如何防范-csrf-攻击" title="什么是 CSRF 范 攻击？如何防范 CSRF 攻击？" class="sidebar-link">什么是 CSRF 范 攻击？如何防范 CSRF 攻击？</a></li><li class="sidebar-sub-header"><a href="/mian/base/safe.html#同源检测" title="同源检测" class="sidebar-link">同源检测</a></li><li class="sidebar-sub-header"><a href="/mian/base/safe.html#什么是-samesite-cookie-属性" title="什么是 Samesite Cookie 属性" class="sidebar-link">什么是 Samesite Cookie 属性</a></li><li class="sidebar-sub-header"><a href="/mian/base/safe.html#csrf-token" title="CSRF Token" class="sidebar-link">CSRF Token</a></li><li class="sidebar-sub-header"><a href="/mian/base/safe.html#双重cookie验证" title="双重cookie验证" class="sidebar-link">双重cookie验证</a></li><li class="sidebar-sub-header"><a href="/mian/base/safe.html#什么是点击劫持-如何防范点击劫持" title="什么是点击劫持？如何防范点击劫持" class="sidebar-link">什么是点击劫持？如何防范点击劫持</a></li><li class="sidebar-sub-header"><a href="/mian/base/safe.html#网络劫持有哪几种" title="网络劫持有哪几种" class="sidebar-link">网络劫持有哪几种</a></li><li class="sidebar-sub-header"><a href="/mian/base/safe.html#中间人攻击的了解" title="中间人攻击的了解" class="sidebar-link">中间人攻击的了解</a></li><li class="sidebar-sub-header"><a href="/mian/base/safe.html#sql-注入攻击" title="SQL 注入攻击" class="sidebar-link">SQL 注入攻击</a></li></ul></li><li><a href="/mian/base/better.html" title="性能优化" class="sidebar-link">性能优化</a></li><li><a href="/mian/base/tools.html" title="工具" class="sidebar-link">工具</a></li><li><a href="/mian/base/datastruct.html" title="数据结构" class="sidebar-link">数据结构</a></li><li><a href="/mian/base/jstimu.html" title="js相关题目" class="sidebar-link">js相关题目</a></li><li><a href="/mian/base/suanfa.html" title="算法" class="sidebar-link">算法</a></li><li><a href="/mian/base/select.html" title="选择题" class="sidebar-link">选择题</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>其他</span> <span class="arrow right"><i aria-label="icon: down" class="anticon anticon-down"><svg viewBox="64 64 896 896" focusable="false" data-icon="down" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"></path></svg></i></span></p> <!----></section></li></ul></aside> <main class="page"> <div class="theme-antdocs-content content__default"><h2 id="知道有哪些可能引起前端安全的问题"><a href="#知道有哪些可能引起前端安全的问题" class="header-anchor">#</a> 知道有哪些可能引起前端安全的问题</h2> <p>前端应用中常遇到的安全问题：</p> <ul><li>跨站脚本xss</li> <li>跨站请求伪造 csrf</li> <li>网络劫持攻击</li> <li>iframe滥用</li> <li>恶意第三方库</li></ul> <h2 id="什么是-xss-范-攻击-如何防范-xss-攻击"><a href="#什么是-xss-范-攻击-如何防范-xss-攻击" class="header-anchor">#</a> 什么是 XSS 范 攻击？如何防范 XSS 攻击</h2> <p>XSS 攻击指的是<strong>跨站脚本攻击</strong>，是一种代码注入攻击。攻击者通过在网站注入恶意脚本，使之在用户的浏览器上运行，从而<strong>盗取用户的信息如 cookie 等</strong>。</p> <p>XSS 的本质是因为网站没有对恶意代码进行过滤，与正常的代码混合在一起了，浏览器没有办法分辨哪些脚本是可信的，从而导致了恶意代码的执行。</p> <p>XSS 一般分为<strong>存储型、反射型和 DOM 型</strong>。</p> <p>存储型指的是<strong>恶意代码提交到了网站的数据库中</strong>，当用户请求数据的时候，服务器将其拼接为HTML 后返回给了用户，从而导致了恶意代码的执行。</p> <p>反射型指的是攻击者<strong>构建了特殊的 URL</strong>，当服务器接收到请求后，从 URL 中获取数据，拼接到HTML 后返回，从而导致了恶意代码的执行。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>比如<span class="token operator">--</span><span class="token operator">&gt;</span> 
http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>test<span class="token punctuation">.</span>com<span class="token operator">/</span>search<span class="token punctuation">.</span>php<span class="token operator">?</span>key<span class="token operator">=</span><span class="token string">&quot;&gt;&lt;script&gt;alert(&quot;</span><span class="token constant">XSS</span>&quot;<span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span> 
</code></pre></div><p>DOM 型指的是攻击者<strong>构建了特殊的 URL</strong>，用户打开网站后，js 脚本从 URL 中获取数据，从而导致了恶意代码的执行。较上面两种，DOM型取出和执行恶意代码都由浏览器端完成，属于前端自身安全漏洞</p> <p>XSS 攻击的预防可以从两个方面入手，一个是<strong>恶意代码提交</strong>的时候，一个是<strong>浏览器执行恶意代码</strong>的时候。</p> <p>对于第一个方面，如果我们对存入数据库的数据都进行的<strong>转义</strong>处理，但是一个数据可能在多个地方使用，有的地方可能不需要转义，由于我们没有办法判断数据最后的使用场景，所以直接在输入端进行恶意代码的处理，其实是不太可靠的。因此我们可以从浏览器的执行来进行预防，一种是使用纯前端的方式，不用服务器端拼接后返回。另一种是对需要插入到 HTML 中的代码做好充分的转义。</p> <p>对于 DOM 型的攻击，主要是前端脚本的不可靠而造成的，我们对于数据获取渲染和字符串拼接的时候应该对可能出现的恶意代码情况进行判断。</p> <p>还有一些方式，比如使用 CSP ，<strong>CSP 的本质是建立一个白名单</strong>，告诉浏览器哪些外部资源可以加载和执行，从而防止恶意代码的注入攻击。还可以对一些敏感信息进行保护，比如 cookie 使用 http-only ，使得脚本无法获取。也可以使用验证码，避免脚本伪装成用户执行一些操作。</p> <h2 id="预防xss"><a href="#预防xss" class="header-anchor">#</a> 预防XSS</h2> <p>xss攻击有两大要素：攻击者提交恶意代码，浏览器执行恶意代码</p> <ul><li>针对cookie劫持，攻击者向漏洞页面写入恶意代码获取cookie，可以通过防止cookie会话劫持来防范，一般要在设置cookie时加HttpOnly，来禁止意外注入站点的恶意js代码操作Cookie造成xss攻击</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// node设置httponly </span>
<span class="token string">'Set-Cookie'</span> <span class="token operator">:</span> <span class="token string">'SSID=EqAc1D; Expires=Wed; HttpOnly'</span> 
</code></pre></div><ul><li>提高攻击门槛：(XSS Filter)针对用户提交的数据进行有效的验证，只接受我们规定的长
度或内容的提交，过滤掉其他的输入内容 或者 将特殊字符输出编码(xss Escape)</li></ul> <p><img src="/assets/img/Xss.0590b396.png" alt=""></p> <ul><li>xss漏洞检测poc：通过漏洞检测代码，完成自测，最小化被攻击风险</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!--比如img图片标记属性跨站攻击代码--&gt;</span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:alert(/xss/)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>img</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">dynsrc</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:alert(<span class="token punctuation">'</span>xss<span class="token punctuation">'</span>)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>img</span><span class="token punctuation">&gt;</span></span> 
<span class="token comment">&lt;!--无需 “&lt;&gt;”，利用 html 标记事件属性跨站--&gt;</span> 
&lt;img src=&quot;&quot; onerror=alert(&quot;xss&quot;)&gt; 
</code></pre></div><h2 id="什么是-csp"><a href="#什么是-csp" class="header-anchor">#</a> 什么是 CSP</h2> <p>CSP 指的是<strong>内容安全策略</strong>，它的本质是建立一个白名单，告诉浏览器哪些外部资源可以加载和执行。我们只需要配置规则，如何拦截由浏览器自己来实现。通常有两种方式来开启 CSP，一种是<strong>设置 HTTP 首部中的 Content-Security-Policy</strong>，一种是<strong>设置 meta 标签的方式 <code>&lt;meta http-equiv=&quot;Content-Security-Policy&quot;&gt;</code></strong></p> <h2 id="什么是-csrf-范-攻击-如何防范-csrf-攻击"><a href="#什么是-csrf-范-攻击-如何防范-csrf-攻击" class="header-anchor">#</a> 什么是 CSRF 范 攻击？如何防范 CSRF 攻击？</h2> <p>CSRF 攻击指的是<strong>跨站请求伪造攻击</strong>，攻击者<strong>诱导用户进入一个第三方网站，然后该网站向被攻击网站发送跨站请求</strong>。如果用户在被攻击网站中保存了登录状态，那么攻击者就可以利用这个登录状态，绕过后台的用户验证，冒充用户向服务器执行一些操作。</p> <p>CSRF 攻击的<strong>本质是利用了 cookie 会在同源请求中携带发送给服务器的特点</strong>，以此来实现用户的冒充。</p> <p>一般的 CSRF 攻击类型有三种：</p> <p>第一种是 <strong>GET 类型的 CSRF 攻击</strong>，比如在网站中的一个 img 标签里构建一个请求，当用户打开这个网站的时候就会自动发起提交。</p> <p>第二种是<strong>POST 类型的 CSRF 攻击</strong>，比如说构建一个表单，然后隐藏它，当用户进入页面时，自动提交这个表单。</p> <p>第三种是<strong>链接类型的 CSRF 攻击</strong>，比如说在 a 标签的 href 属性里构建一个请求，然后诱导用户去点击。</p> <p>CSRF 可以用下面几种方法来防护：</p> <p>第一种是<strong>同源检测</strong>的方法，服务器<strong>根据 http 请求头中 origin 或者 referer 信息来判断请求是否为允许访问的站点</strong>，从而对请求进行过滤。当 origin 或者 referer 信息都不存在的时候，直接阻止。这种方式的缺点是有些情况下 referer 可以被伪造。还有就是我们这种方法同时把搜索引擎的链接也给屏蔽了，所以一般网站会允许搜索引擎的页面请求，但是相应的页面请求这种请求方式也可能被攻击者给利用。</p> <p>第二种方法是<strong>使用 CSRF Token 来进行验证</strong>，服务器向用户<strong>返回一个随机数 Token</strong>，当网站再次发起请求时，在请求参数中加入服务器端返回的 token ，然后服务器对这个 token 进行验证。这种方法解决了使用 cookie 单一验证方式时，可能会被冒用的问题，但是这种方法存在一个缺点就是，我们需要给网站中的所有请求都添加上这个 token，操作比较繁琐。还有一个问题是一般不会只有一台网站服务器，如果我们的请求经过负载平衡转移到了其他的服务器，但是这个服务器的 session 中没有保留这个 token 的话，就没有办法验证了。这种情况我们可以通过改变 token 的构建方式来解决。</p> <p>第三种方式使用<strong>双重 Cookie 验证</strong>的办法，服务器在用户访问网站页面时，向请求域名注入一个 Cookie，内容为随机字符串，然后当用户再次向服务器发送请求的时候，从 cookie 中取出这个字符串，添加到 URL 参数中，然后服务器通过对 cookie 中的数据和参数中的数据进行比较，来进行验证。使用这种方式是利用了攻击者只能利用 cookie，但是不能访问获取 cookie的特点。并且这种方法比 CSRF Token 的方法更加方便，并且不涉及到分布式访问的问题。这种方法的缺点是如果网站存在 XSS 漏洞的，那么这种方式会失效。同时这种方式不能做到子域名的隔离。</p> <p>第四种方式是使用<strong>在设置 cookie 属性的时候设置 Samesite</strong> ，<strong>限制 cookie 不能作为被第三方使用</strong>，从而可以避免被攻击者利用。Samesite 一共有两种模式，一种是严格模式，在严格模式下 cookie 在任何情况下都不可能作为第三方 Cookie 使用，在宽松模式下，cookie 可以被请求是 GET 请求，且会发生页面跳转的请求所使用。</p> <p>总结：</p> <p>CSRF（Cross-site request forgery）跨站请求伪造：攻击者诱导受害者进⼊第三⽅⽹站，在第三⽅⽹站中，向被攻击⽹站发送跨站请求。利⽤受害者在被攻击⽹站已经获取的注册凭证，绕过后台的⽤户验证，达到冒充⽤户对被攻击的⽹站执⾏某项操作的⽬的，常规的过程如下：</p> <ol><li>用户打开浏览器，访问受信任网站A，输入用户名和密码请求登录网站A</li> <li>在用户信息通过验证后，网站A产生Cookie信息并返回给浏览器</li> <li>未退出网站A之前，在同一浏览器中，攻击者引诱用户进入网站B</li> <li>网站B接收到用户请求后，返回一些攻击性代码，并发出一个请求要求访问第三方站点A</li> <li>浏览器在接收到这些攻击性代码后，根据网站B的请求，在用户不知情的情况下携带Cookie信息，向网站A发出请求。网站A根据用户的Cookie信息以及用户的权限处理该请求，导致来自网站B的恶意代码被执行</li></ol> <p>CSRF通常从第三⽅⽹站发起，被攻击的⽹站⽆法防⽌攻击发⽣，只能通过增强⾃⼰⽹站针对CSRF的防护能⼒来提升安全性</p> <p>CSRF有两个特点：</p> <ul><li>通常发生在第三方域名</li> <li>攻击者不能获取到cookie等信息，只是使用</li></ul> <p>针对这两点，我们可以制定专门的防护策略：</p> <ul><li>阻止不明外域的访问
<ul><li>同源检测</li> <li>Samesite Cookie</li></ul></li> <li>提交时要求附加文本域验证身份才可以获取信息
<ul><li>CSRF Token</li> <li>双重cookie验证</li></ul></li></ul> <h2 id="同源检测"><a href="#同源检测" class="header-anchor">#</a> 同源检测</h2> <p>通过使用Orgin Header确定来源域名：在部分与CSRF有关的请求中，请求的Header中会携带Origin字段,如果Origin存在，那么直接使⽤Origin中的字段确认来源域名就可以使用Referer Header确定域名来源：根据HTTP协议，HTTP头中有一个字段叫Referer，记录了该HTTP请求的来源地址</p> <h2 id="什么是-samesite-cookie-属性"><a href="#什么是-samesite-cookie-属性" class="header-anchor">#</a> 什么是 Samesite Cookie 属性</h2> <p>Google起草了⼀份草案来改进HTTP协议，那就是为Set-Cookie响应头新增Samesite属性</p> <p>Samesite Cookie 表示<strong>同站 cookie</strong>，避免 cookie 被第三方所利用。<strong>将 Samesite 设为 strict ，这种称为严格模式</strong>，表示这个 cookie 在任何情况下都不可能作为第三方 cookie<strong>将 Samesite 设为 Lax ，这种模式称为宽松模式</strong>，如果这个请求是个 GET 请求，并且这个请求改变了当前页面或者打开了新的页面，那么这个 cookie 可以作为第三方 cookie，其余情况下都不能作为第三方 cookie。使用这种方法的缺点是，因为它<strong>不支持子域</strong>，所以子域没有办法与主域共享登录信息，每次转入子域的网站，都回重新登录。还有一个问题就是它的兼容性不够好。</p> <h2 id="csrf-token"><a href="#csrf-token" class="header-anchor">#</a> CSRF Token</h2> <p>通过csrf token验证请求的身份，是够携带正确的token，来区分正常的请求和攻击的请求</p> <p>CSRF Token的防护策略分为三个步骤：</p> <ul><li>将CSRF Token输出到⻚⾯中</li> <li>⻚⾯提交的请求携带这个Token</li> <li>服务器验证Token是否</li></ul> <h2 id="双重cookie验证"><a href="#双重cookie验证" class="header-anchor">#</a> 双重cookie验证</h2> <p>利⽤CSRF攻击不能获取到⽤户Cookie的特点，我们可以要求Ajax和表单请求携带⼀个Cookie中的值</p> <p>双重Cookie采⽤以下流程：</p> <ul><li>在⽤户访问⽹站⻚⾯时，向请求域名注⼊⼀个Cookie，内容为随机字符串</li> <li>在前端向后端发起请求时，取出Cookie，并添加到URL的参数中</li> <li>后端接⼝验证Cookie中的字段与URL参数中的字段是否⼀致，不⼀致则拒</li></ul> <h2 id="什么是点击劫持-如何防范点击劫持"><a href="#什么是点击劫持-如何防范点击劫持" class="header-anchor">#</a> 什么是点击劫持？如何防范点击劫持</h2> <p>点击劫持是一种视觉欺骗的攻击手段，攻击者将需要攻击的网站通过 iframe 嵌套的方式嵌入自己的网页中，并将 iframe 设置为透明，在页面中透出一个按钮诱导用户点击。我们可以<strong>在 http 相应头中设置 X-FRAME-OPTIONS 来防御用 iframe 嵌套的点击劫持攻击</strong>。通过不同的值，可以规定页面在特定的一些情况才能作为 iframe 来使用。</p> <h2 id="网络劫持有哪几种"><a href="#网络劫持有哪几种" class="header-anchor">#</a> 网络劫持有哪几种</h2> <p>网络劫持一般分为两种：HTTP劫持和DNS劫持</p> <p>DNS劫持：</p> <ul><li>DNS强制解析：通过修改运营商的本地DNS记录，来引导⽤户流量到缓存服务器</li> <li>302跳转的⽅式：通过监控⽹络出⼝的流量，分析判断哪些内容是可以进⾏劫持处理的,再对劫持的内存发起跳转的回复，引导⽤户获取内容</li></ul> <p>HTTP劫持: 由于http明⽂传输，运营商会修改你的http响应内容(即加⼴告)DNS劫持由于涉嫌违法,已经被监管；针对HTTP劫持，最有效的办法就是全站HTTPS，将HTTP加密，这使得运营商⽆法获取明⽂，就⽆法劫持你的响应内容</p> <h2 id="中间人攻击的了解"><a href="#中间人攻击的了解" class="header-anchor">#</a> 中间人攻击的了解</h2> <p>中间人(Man-in-the-middle attack, MITM)是指攻击者和通讯的两端分别创建独立的联系，并交换其得到的数据，攻击者可以拦截通信双方的通话并插入新的内容</p> <p>一般的过程如下:</p> <ul><li>客户端发送请求到服务端，请求被中间⼈截获</li> <li>服务器向客户端发送公钥</li> <li>中间⼈截获公钥，保留在⾃⼰⼿上。然后⾃⼰⽣成⼀个【伪造的】公钥，发给客户端</li> <li>客户端收到伪造的公钥后，⽣成加密hash值发给服务器</li> <li>中间⼈获得加密hash值，⽤⾃⼰的私钥解密获得真秘钥,同时⽣成假的加密hash值，发给服务器</li> <li>服务器⽤私钥解密获得假密钥,然后加密数据传输给客户端</li></ul> <h2 id="sql-注入攻击"><a href="#sql-注入攻击" class="header-anchor">#</a> SQL 注入攻击</h2> <p>SQL 注入攻击指的是攻击者在 HTTP 请求中注入<strong>恶意的 SQL 代码</strong>，服务器使用参数构建数据库SQL 命令时，恶意 SQL 被一起构造，破坏原有 SQL 结构，并在数据库中执行，达到编写程序时意料之外结果的攻击行为。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/mian/base/design.html" class="prev"><i aria-label="icon: left" class="anticon anticon-left"><svg viewBox="64 64 896 896" focusable="false" data-icon="left" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 0 0 0 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"></path></svg></i>
        设计模式
      </a></span> <span class="next"><a href="/mian/base/better.html">
        性能优化
        <i aria-label="icon: right" class="anticon anticon-right"><svg viewBox="64 64 896 896" focusable="false" data-icon="right" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M765.7 486.8L314.9 134.7A7.97 7.97 0 0 0 302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 0 0 0-50.4z"></path></svg></i></a></span></p></div> </main> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.7804a0b3.js" defer></script><script src="/assets/js/2.9d52316c.js" defer></script><script src="/assets/js/14.767e6492.js" defer></script>
  </body>
</html>